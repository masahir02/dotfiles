#!/usr/bin/env bash

# https://brew.sh/
if ! which brew > /dev/null; then
  /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
fi

# https://github.com/zdharma-continuum/zinit
if [ ! -d $HOME/.local/share/zinit ]; then
  sh -c "$(curl -fsSL https://git.io/zinit-install)"
fi

# https://github.com/junegunn/vim-plug
vim_plug=$HOME/.local/share/nvim/site/autoload/plug.vim
if [ ! -f $vim_plug ]; then
  curl -fLo $vim_plug --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
fi

dotfiles_dir=$HOME/src/github.com/masahir02/dotfiles
if [ ! -d $dotfiles_dir ]; then
  git clone git@github.com:masahir02/dotfiles.git $dotfiles_dir
fi

dotfiles=(
  .gemrc
  .psqlrc
  .tmux.conf
  .zshrc
  .Brewfile
  bin
)
for dotfile in ${dotfiles[@]}; do ln -sfv $dotfiles_dir/$dotfile $HOME; done

dotconfigs=(
  karabiner
  nvim
  git
)
for dotconfig in ${dotconfigs[@]}; do ln -sfv $dotfiles_dir/$dotconfig $HOME/.config; done

# vs-code
ln -sfv $dotfiles_dir/settings.json $HOME/Library/Application\ Support/Code/User/

brew bundle --global
nvim +PlugInstall +qa
